{"ast":null,"code":"import nodemailer from 'nodemailer';\nconst transport = nodemailer.createTransport({\n  host: 'mail.dgroup.by',\n  port: 25,\n  auth: {\n    user: 'postmaster@dgroup.by',\n    pass: 'uTh3Eith'\n  },\n  tls: {\n    rejectUnauthorized: false\n  }\n});\nexport default ((req, res) => {\n  const {\n    name,\n    email,\n    phone,\n    message\n  } = req.body;\n\n  if (req.method === 'POST') {\n    try {\n      const mes = {\n        from: 'postmaster@dgroup.by',\n        to: 'kiryl.parfiankou.dev@gmail.com',\n        subject: 'Test message',\n        text: `\nИмя: ${name}\nПочта: ${email}\nТелефон: ${phone}\n\n${message}`\n      };\n      transport.sendMail(mes, function (err, info) {\n        if (err) {\n          console.log(err);\n        } else {\n          console.log(info);\n        }\n      });\n    } catch (err) {\n      console.log(err);\n    }\n\n    res.statusCode = 200;\n    res.end();\n  } else {\n    res.statusCode = 405;\n    res.end();\n  }\n});\nexport const config = {\n  api: {\n    bodyParser: {\n      sizeLimit: '1mb'\n    }\n  }\n};","map":{"version":3,"sources":["/mnt/w/work/honey-ui-3/pages/api/email.js"],"names":["nodemailer","transport","createTransport","host","port","auth","user","pass","tls","rejectUnauthorized","req","res","name","email","phone","message","body","method","mes","from","to","subject","text","sendMail","err","info","console","log","statusCode","end","config","api","bodyParser","sizeLimit"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,YAAvB;AAGA,MAAMC,SAAS,GAAGD,UAAU,CAACE,eAAX,CAA2B;AAC3CC,EAAAA,IAAI,EAAE,gBADqC;AAE3CC,EAAAA,IAAI,EAAE,EAFqC;AAG3CC,EAAAA,IAAI,EAAE;AACHC,IAAAA,IAAI,EAAE,sBADH;AAEHC,IAAAA,IAAI,EAAE;AAFH,GAHqC;AAO3CC,EAAAA,GAAG,EAAE;AACDC,IAAAA,kBAAkB,EAAE;AADnB;AAPsC,CAA3B,CAAlB;AAYA,gBAAe,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC3B,QAAM;AACJC,IAAAA,IADI;AAEJC,IAAAA,KAFI;AAGJC,IAAAA,KAHI;AAIJC,IAAAA;AAJI,MAKFL,GAAG,CAACM,IALR;;AAMA,MAAGN,GAAG,CAACO,MAAJ,KAAe,MAAlB,EAA0B;AACxB,QAAI;AACF,YAAMC,GAAG,GAAG;AACVC,QAAAA,IAAI,EAAE,sBADI;AAEVC,QAAAA,EAAE,EAAE,gCAFM;AAGVC,QAAAA,OAAO,EAAE,cAHC;AAIVC,QAAAA,IAAI,EAAG;OACRV,IAAK;SACHC,KAAM;WACJC,KAAM;;EAEfC,OAAQ;AATQ,OAAZ;AAWAd,MAAAA,SAAS,CAACsB,QAAV,CAAmBL,GAAnB,EAAwB,UAASM,GAAT,EAAcC,IAAd,EAAoB;AACxC,YAAID,GAAJ,EAAS;AACPE,UAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD,SAFD,MAEO;AACLE,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACD;AACJ,OAND;AAQD,KApBD,CAoBE,OAAOD,GAAP,EAAY;AACZE,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD;;AACDb,IAAAA,GAAG,CAACiB,UAAJ,GAAiB,GAAjB;AACAjB,IAAAA,GAAG,CAACkB,GAAJ;AACD,GA1BD,MA0BO;AACLlB,IAAAA,GAAG,CAACiB,UAAJ,GAAiB,GAAjB;AACAjB,IAAAA,GAAG,CAACkB,GAAJ;AACD;AACF,CArCD;AAuCA,OAAO,MAAMC,MAAM,GAAG;AACpBC,EAAAA,GAAG,EAAE;AACHC,IAAAA,UAAU,EAAE;AACVC,MAAAA,SAAS,EAAE;AADD;AADT;AADe,CAAf","sourcesContent":["import nodemailer from 'nodemailer';\r\n\r\n\r\nconst transport = nodemailer.createTransport({\r\n  host: 'mail.dgroup.by',\r\n  port: 25,\r\n  auth: {\r\n     user: 'postmaster@dgroup.by',\r\n     pass: 'uTh3Eith'\r\n  },\r\n  tls: {\r\n      rejectUnauthorized: false\r\n  }\r\n});\r\n\r\nexport default (req, res) => {\r\n  const {\r\n    name,\r\n    email,\r\n    phone,\r\n    message,\r\n  } = req.body;\r\n  if(req.method === 'POST') {\r\n    try {\r\n      const mes = {\r\n        from: 'postmaster@dgroup.by',\r\n        to: 'kiryl.parfiankou.dev@gmail.com',\r\n        subject: 'Test message',\r\n        text: `\r\nИмя: ${name}\r\nПочта: ${email}\r\nТелефон: ${phone}\r\n\r\n${message}`,\r\n      };\r\n      transport.sendMail(mes, function(err, info) {\r\n          if (err) {\r\n            console.log(err)\r\n          } else {\r\n            console.log(info);\r\n          }\r\n      });\r\n\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    res.statusCode = 200;\r\n    res.end();\r\n  } else {\r\n    res.statusCode = 405;\r\n    res.end();\r\n  }\r\n}\r\n\r\nexport const config = {\r\n  api: {\r\n    bodyParser: {\r\n      sizeLimit: '1mb',\r\n    },\r\n  },\r\n}"]},"metadata":{},"sourceType":"module"}