{"ast":null,"code":"import nodemailer from 'nodemailer';\nconst EMAIL = process.env.EMAIL;\nconst EMAIL_SENDER = process.env.EMAIL_SENDER;\nconst EMAIL_PASSWORD = process.env.EMAIL_PASSWORD;\nconst transport = nodemailer.createTransport({\n  host: 'mail.dgroup.by',\n  port: 25,\n  auth: {\n    user: EMAIL_SENDER,\n    pass: EMAIL_PASSWORD\n  },\n  tls: {\n    rejectUnauthorized: false\n  }\n});\nexport default ((req, res) => {\n  const {\n    name,\n    email,\n    phone,\n    message\n  } = req.body;\n\n  if (req.method === 'POST') {\n    try {\n      const mes = {\n        from: EMAIL_SENDER,\n        to: EMAIL,\n        subject: 'Пёлка (сообщение)',\n        text: `\nИмя: ${name}\nПочта: ${email}\nТелефон: ${phone}\n\n${message}`\n      };\n      transport.sendMail(mes, function (err, info) {\n        if (err) {\n          console.log(err);\n        } else {\n          console.log(info);\n        }\n      });\n    } catch (err) {\n      console.log(err);\n    }\n\n    res.statusCode = 200;\n    res.end();\n  } else {\n    res.statusCode = 405;\n    res.end();\n  }\n});\nexport const config = {\n  api: {\n    bodyParser: {\n      sizeLimit: '1mb'\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}